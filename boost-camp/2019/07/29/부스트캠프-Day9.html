<!DOCTYPE html>

<html>

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>
    부스트 캠프 Day9 - changgunyee
    
  </title>

  <meta name="description"
    content="프로그램 테스트 테스트 코드가 무엇인지 이해한다. 테스트 코드의 동작 방식을 이해한다. 1. 코드 동작 이해 assert 객체의 구현 각 메소드에 대하여, 예상값과 결과값을 비교한 후 두 값이 일치하지 않을 경우 에러를 발생시킨다. const assert = { equal: fun...">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-7578104907913978",
            enable_page_level_ads: true
        });
  </script>

  <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet'
    type='text/css'>
  <link
    href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800'
    rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="/assets/vendor/bootstrap/css/bootstrap.min.css">

  <link rel="stylesheet" href="/assets/vendor/fontawesome-free/css/all.min.css">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="stylesheet" href="/assets/custom.css">
  <link rel="canonical" href="https://changgunyee.github.io/boost-camp/2019/07/29/%EB%B6%80%EC%8A%A4%ED%8A%B8%EC%BA%A0%ED%94%84-Day9.html">
  <link rel="alternate" type="application/rss+xml" title="changgunyee"
    href="/feed.xml">
  <style>
    body {
      font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
    }
  </style>

</head>

<body>
  <!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href="/">changgunyee</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      Menu
      <i class="fa fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="/">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/about">About</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/develop">Posts</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/contact">Contact</a>
        </li>
      </ul>
    </div>
  </div>
</nav>


  <!-- Page Header -->

<header class="masthead"
  style="background-image: url('/img/boost-camp.jpg')">
  
    <div class="overlay"></div>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <div class="post-heading">
            <h1>부스트 캠프 Day9</h1>
            
            <span class="meta">Posted by
              <a href="#">이창권</a>
              on July 29, 2019
            </span>
          </div>
        </div>
      </div>
    </div>
  </header>

  <div class="container">
    <div class="row">
      <div class="col-lg-10 col-md-10 mx-auto">

        <h1 id="프로그램-테스트">프로그램 테스트</h1>

<p>테스트 코드가 무엇인지 이해한다.
테스트 코드의 동작 방식을 이해한다.</p>

<h2>1. 코드 동작 이해</h2>

<p>assert 객체의 구현</p>
<ul>
  <li>각 메소드에 대하여, 예상값과 결과값을 비교한 후 두 값이 일치하지 않을 경우 에러를 발생시킨다.</li>
</ul>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">assert</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">equal</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">left</span><span class="p">,</span> <span class="nx">right</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">left</span> <span class="o">===</span> <span class="nx">right</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">"</span><span class="s2">에러 내용);
        }
    },
    }
</span></code></pre></div></div>

<p>test 함수의 구현</p>
<ul>
  <li>try catch문을 이하여 호출한 callback 함수에서 에러가 발생하는지 확인한다.</li>
  <li>에러를 catch 했을 경우는 FAIL을 그렇지 않은 경우에는 PASS 를 출력한다.</li>
</ul>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">test</span><span class="p">(</span><span class="nx">str</span><span class="p">,</span> <span class="nx">callback</span><span class="p">){</span>
    <span class="k">try</span><span class="p">{</span>
        <span class="nx">callback</span><span class="p">();</span>
        <span class="nx">PASS</span>
    <span class="p">}</span>
    <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
        <span class="nx">FAIL</span>
    <span class="p">};</span>
<span class="p">}</span>
</code></pre></div></div>

<p>비동기 함수의 동기적 처리</p>
<ul>
  <li>위 try - catch 구문으로 구현한 코드를 async, await, Promise 구문을 이용하여 개선한다.</li>
</ul>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">test</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span> <span class="nx">assertFunc</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">_promise</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span> <span class="k">async</span> <span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="k">await</span> <span class="nx">assertFunc</span><span class="p">();</span>
            <span class="nx">resolve</span><span class="p">(</span><span class="dl">'</span><span class="s1">PASS</span><span class="dl">'</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
            <span class="nx">reject</span><span class="p">(</span><span class="dl">'</span><span class="s1">FAIL</span><span class="dl">'</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">answer</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">message</span><span class="p">}</span><span class="s2"> : `</span> <span class="o">+</span> <span class="s2">`</span><span class="p">${</span><span class="nx">answer</span><span class="p">}</span><span class="s2">`</span><span class="p">.</span><span class="nx">green</span><span class="p">);</span>
    <span class="p">})</span>
        <span class="p">.</span><span class="k">catch</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span><span class="nx">answer</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">message</span><span class="p">}</span><span class="s2"> : `</span> <span class="o">+</span> <span class="s2">`</span><span class="p">${</span><span class="nx">answer</span><span class="p">}</span><span class="s2">`</span><span class="p">.</span><span class="nx">red</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="k">return</span> <span class="nx">_promise</span><span class="p">;</span>
</code></pre></div></div>

<h2>2. 코드 동작 개선</h2>

<p>Critical Section을 이용한 비동기적 함수의 동기적 구현</p>
<ol>
  <li>async, await 구문을 이용하여 test 함수가 비동기적으로 작동하도록 구현한다.</li>
  <li>test 함수의 상단에 프로토타입 변수 button을 이용하여 Critical Section을 만든다.</li>
  <li>test 함수의 시행이 끝날 경우 button을 꺼준다.</li>
</ol>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">wait</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">resolve</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">resolve</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
    <span class="p">},</span> <span class="mi">10</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">test</span><span class="p">(</span><span class="nx">str</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">(</span><span class="k">async</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//Critical Section 구현</span>
    <span class="k">while</span> <span class="p">(</span><span class="nx">test</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">button</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">await</span> <span class="nx">wait</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="nx">test</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">button</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">await</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">resolve</span><span class="p">(</span><span class="nx">callback</span><span class="p">());</span>
    <span class="p">})</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">str</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> : </span><span class="dl">'</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">PASS</span><span class="dl">'</span><span class="p">.</span><span class="nx">blue</span><span class="p">);</span>
        <span class="p">})</span>
        <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">e</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">str</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> : </span><span class="dl">'</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">FAIL</span><span class="dl">'</span><span class="p">.</span><span class="nx">red</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
        <span class="p">});</span>
    <span class="nx">test</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">button</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">})();</span>
<span class="p">}</span>
<span class="nx">test</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">button</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</code></pre></div></div>

<h4 id="자신이-미션을-하면서-학습한-내용">자신이 미션을 하면서 학습한 내용</h4>
<ul>
  <li>비동기적 코드를 동기적으로 바꾸는 여러가지 방법에 대해서 학습.</li>
  <li>Promise를 사용하거나, async~await 두가지 방법으로 모두 구현가능</li>
  <li>async function 반환형은 promise라는 점을 학습(반환값 존재시 promise안에 묶여서 반환된다.)</li>
</ul>

<h2>3. Consideration</h2>
<h4 id="스스로-학습할-내용">스스로 학습할 내용</h4>

<p>테스트 라이브러리의 다양한 기능을 좀더 살펴보고, 내 코드와 동작방식의 차이에 대해서 비교해본다.</p>

<p>Behavior-Driven Javascript이다.</p>
<ul>
  <li>시나리오를 기반으로 테스트 케이스를 작성(함수 단위 테스트를 권장x)</li>
  <li>Feature : 테스트에 대상의 기능/책임을 명시한다.</li>
  <li>Scenario : 테스트 목적에 대한 상황을 설명한다.</li>
  <li>Given : 시나리오 진행에 필요한 값을 설정한다.</li>
  <li>When : 시나오를 진행하는데 필요한 조건을 명시한다.</li>
  <li>Then : 시나리오를 완료했을 때 보장해야 하는 결과를 명시한다.</li>
</ul>

<p>스파이(spy) 기능 존재</p>
<ul>
  <li>내 코드는 결과에 집중해서 잘 행동하는지 확인만 가능</li>
  <li>Jasmin의 spy기능을 사용하면 함수가 호출되었는지 여부나 어떻게 호출하기를 원하는지를 확인할 수 있다.</li>
</ul>

<p>비동기 함수에 대한 테스트를 도와주는 함수들(run(), waitsFor(), wait())와 같은 기능들이 존재</p>

<h4 id="다같이-확인할-사항">다같이 확인할 사항</h4>
<p>인기있는 테스트프레임워크나 테스트라이브러리</p>
<ul>
  <li>mocha : 테스트 러너를 지원하는 테스트 프레임워크</li>
  <li>Jest</li>
  <li>Jasmine</li>
  <li>Karma</li>
</ul>

<p>cf) Mocha vs Jasmine vs QUnit
<img src="https://i.imgur.com/JIXzGbR.png" alt="" /></p>

<p>Jasmine 테스팅 프레임 워크의 스파이(spy) 기능 구현 방법</p>
<ul>
  <li>spyOn이라는 함수는 호출되어야 하는 함수를 기록해 둔 후,  함수 호출 스택을 참조해 해당 함수가 호출되었는지를 또한 기록 하여 스펙러너가 실행될 시, 해당 함수가 호출되었다면 통과, 그렇지 않다면 테스트 실패를 출력하게끔 구현이 가능하다.
mocha에서 지원해주는 기능</li>
  <li>브라우저 지원</li>
  <li>간단한 비동기 테스트 지원</li>
  <li>테스트 커버리지 리포팅</li>
  <li>문자열 비교 지원</li>
  <li>실행되는 테스트에 대한 자바스크립트 API.</li>
  <li>CI에 대한 적절한 exit 상태 지원</li>
</ul>

<p>문자열 비교 : chartAt함수로 돌려가면서 실행하여 구현할 수 있다.</p>

<p>TDD</p>
<ul>
  <li>Cycle을 반복적으로 테스트하는 개발 프로세스로 테스트 코드를 먼저 작성하고 작성된 테스트 코드를 패스할 수 있도록 비즈니스 로직을 개발하는 방법</li>
  <li>한 Cycle :
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>개발 명세 작성
개발 명세에 따른 테스트 코드 작성
테스트 실행
테스트가 성공하도록 최소한의 비스니스 로직 작성
테스트 실행
테스트 케이스 추가
테스트 실행
테스트 코드 및 테스트 케이스 Refactoring
테스트 실행
</code></pre></div>    </div>
  </li>
</ul>

<p>TDD 장점 :</p>
<ul>
  <li>높은 퀄리티의 소프트웨어를 보장</li>
  <li>보다 튼튼한 객체지향적인 코드 생산 가능</li>
  <li>재설계 시간의 단축</li>
  <li>디버깅 시간의 단축</li>
  <li>애자일과의 시너지 효과</li>
  <li>테스트 문서의 대체 가능</li>
  <li>추가 구현의 용이함</li>
</ul>

<p>TDD 단점 :</p>
<ul>
  <li>빠른 결과물을 원하는 환경에서는 부적합 (퀄리티를 중시하는 프로세스이기 때문에)</li>
  <li>테스트가 어려운 환경에서는 테스트 코드를 짜기가 어려움</li>
  <li>진입장벽이 높고 난이도가 있는 작업이다. 객체지향에 올바른 이해를 가지고 있지 않다면 테스트코드를 작성하기가 힘들다.</li>
</ul>

<blockquote>
  <p>refernece</p>
</blockquote>

<ul>
  <li>https://blog.bitsrc.io/top-javascript-testing-frameworks-in-demand-for-2019-90c76e7777e9</li>
  <li>http://www.hoons.net/Lecture/View/644</li>
</ul>

<!--
# Day9 프로그램 테스트

## 왜 필요한가?
프로그래밍의 특징중 하나는 계속 기능이 수정되고 변경된다는 점이다.  

문제는 이 과정에서 소프트웨어 동작에 예상하지 못하는 결함(side-effect)이 발견되기도 한다. 

이런 결함을 최소화 시키는 것은 유지보수단계에서 매우 중요하다.




## 학습 목표
- 테스트 코드가 무엇인지 이해한다.
- 테스트 코드의 동작 방식을 이해한다.



----


## 미션



### 준비)

##### 1. 동료의 코드 받기

현재 미션은 동료의 코드를 테스트하는 항목이 포함되어 있다.

동료로부터 지금까지 구현한 미션풀이 코드 하나를 건네받는다. 

동료는 5개 이상의 실행가능한 함수가 포함된 코드를 건네야 한다.




##### 2. **src/source.js** 생성

##### 이 코드는 **수정할 수 없다.**

```javascript
const sum = (a, b) => {
    return a + b;
}

const isEven = (n) => { return n % 2 == 0; }

const appendLazy = (arr, data, time) => {
    return new Promise(resolve => {
        setTimeout(()=> {
            arr.push(data);
            resolve(arr)
        }, time)
    });
}

module.exports = {sum, isEven, appendLazy}
```



##### 3. spec/source.test.js 생성


- 테스트코드가 이미 구현된 파일이다. 
- source.test.js에 테스트코드를 추가할 예정이지만, **이미 구현된 아래 코드내용은 수정할 수 없다.** 


```javascript
const {sum, isEven, appendLazy } = require("../src/source.js")
const _ = require("lodash");
const {test, assert }  = require("../lib/tester.js");

test('support notEqual', () => {
    assert.notEqual(undefined, null); //pass
});

test('adds 1 + 2 to equal 3', () => {
    assert.equal(sum(1,2), 3) //pass
});

test('should support flattening of nested arrays', function() {
    const arr = [1, [2, [3, [4]], 5]];
	  assert.detailEqual(_.flatten(arr), [1, 2, [3, [4]], 5]); //pass
    assert.detailEqual(_.flattenDepth(arr,2), [1, 2, 3, [4], 5]); //pass
    assert.detailEqual(_.flattenDepth(arr,3), [1, 2, 3, [4], 5]);  //fail
});

test('should support filtering of arrays', function() {
    const arr = [1,2,3,4,5,6];
    assert.detailEqual(_.filter(arr, isEven), [2,4,5,6]); //fail
});

```





### 1. **lib/tester.js**  개발

- spec/source.test.js 안의 테스트코드가 동작될 수 있도록  **lib/tester.js** 코드를 개발한다.
  - test, assert, equal, notEqual, detailEqual를 구현
  - 참고로, detailEqual 은 객체나 배열의 중첩된 모든 원소의 값이 일치하는지 비교한다.



lib/tester.js를 완성한 후 source.test.js를 실행하면, 아래처럼 출력된다.

세번째와 네번째 항목은 fail항목이 포함되어 있기때문에, 최종결과는  'FAIL' 이다.

```shell
jisuyoun@Jisuui-Macmini spec (master) $ node source.test.js 
support notEqual : PASS
adds 1 + 2 to equal 3 : PASS
should support flattening of nested arrays : FAIL
should support filtering of arrays :  FAIL  
```





### 2. 비동기함수 테스트코드 완성하기
**src/source.test.js**에 , **appendLazy 함수에 대한 테스트 코드**를 추가로 구현한다.

이미 사용중인 lib/tester.js의 **test** 함수를 사용해서 구현한다.

**given/when/then의 순서를 따라서** 구현한다.

```javascript
//given
const arr = [10,20];

//when
appendLazy(arr, 30, 2000);

//then
assert.detailEqual(arr, [10,20,30]);
```



asyncTest 함수가 완성되면, 아래처럼 결과가 나온다. 

마지막 라인은 2초뒤에 출력된다.

```shell
day9/spec$ node source.test.js 
support notEqual : PASS
adds 1 + 2 to equal 3 : PASS
should support flattening of nested arrays : FAIL  
should support filtering of arrays :  FAIL  
async test : PASS
```



###3. 동기/비동기의 순차적인 실행 결과

아래 테스트코드를 soruce.test.js 맨 아래에 추가한다.

```javascript
test('should support filtering of arrays 2', function() {
    const arr = [1,2,3,4,5,6];
    assert.detailEqual(_.filter(arr, isEven), [2,4,6]); //pass
});
```



이후 결과는 아래와 같이 나온다. 

'async test'부분은 2번에서 구현한 결과이며 2초뒤에 실행된다.

마지막줄은, 'aysnc test' 실행이후 즉시 노출된다.

```shell
jisuyoun@Jisuui-Macmini spec (master) $ node source.test.js 
support notEqual : PASS
adds 1 + 2 to equal 3 : PASS
should support flattening of nested arrays : FAIL
should support filtering of arrays :  FAIL  
async test : PASS
should support filtering of arrays 2 : PASS
```



### 4. 출력결과 하이라이트

- 테스트가 실패했을때 출력되는  <span style="color:red">'FAIL'</span> 글자가 빨간색으로 표시되도록 코드를 수정한다.




### 5. 동료가 구현한 코드에 대한 테스트코드 구현

- **동료의 코드**에 대한 **테스트 코드**를 구현한다.
- 테스트코드 대상 함수는 **최소 5개**이다. 따라서 5개의 테스트코드를 구현해야 한다.
- 테스트코드 구현이 어려운 경우(스파게리🍝 코드라던가..),  동료의 코드를 **내가 직접 리팩토링**한 후 테스트 코드를 구현해도 좋다. (동료가 직접 리팩토링 해줄 수 없다)



------

## 배경 지식

### Software Test

software test에는 unit test를 포함해서 여러가지 테스트 개념이 있다.  

아래 링크의 4가지 레벨이 일반적인 테스트 종류로 본다.

http://www.seguetech.com/the-four-levels-of-software-testing/



- unit test :  소프트웨어의 최소단위, 보통 함수를 가리킴
- Integration test : 단위 기능이 합쳐진 기능에 대한 테스트
- System test : 위 내용보다 더 큰 개념, 전체 시스템에 대한 동작 테스트
- Acceptance(인수) Test  : 고객이 ok할 수 있는지 판단하기 위한 테스트

그리고, 

- UI test : FE에서 존재하는 개념으로, UI 기능 단위로 진행하는 테스트. 보통 Unit test와 system test 사이라고 볼 수 있음.
- E2E test : End-to-end 테스트.  이 역시 UI 테스트와 같이 말하는 경우도 있고, 전체 시스템관점에서의 테스트로 보는 경우도 있음. 



------

### TDD(Test drive development)

개발 -> 테스트코드 작성 이라는 순서가 아니고 그 반대.

함수단위 **테스트코드 구현 -> fail -> 함수구현 -> pass -> refactoring.**



=> TDD는 단순한 테스트 코드 구현방식보다, 프로그래밍 설계 방법론에 가까움.



참고로, 비슷한 용어로 BDD(Behavior drive development)가 있음

BDD는 함수단위라기 보다는 하나의 인터랙션(시나리오)단위로 테스트 코드를 구현하는 방식.

TDD를 BDD형태로 구현할 수 있음. TDD가 함수단위라 그런 점의 차이점은 있으나, 두 개가 대비대는 개념은 아님. 



------

### Unit Test

프로그래밍의 최소단위를 테스트 하는 것. 그 대상은 보통 함수.

사람이 직접 모든 함수를 호출하는 것은 불가능.
특정 함수를 호출하도록 테스트 코드를 구현하고, 이를 자동화해서 그 결과를 확인.



```javascript
function print(arg) {
	return 'result' + arg;
}

var expected = "result yes";
console.log(expected === print('yes')); // 성공(success)
console.log(expected === print('no'));  // 실패(fail)
```



------

### JavaScript unit test 라이브러리

앞 예제와 같이 비교를 하는 것이 귀찮기 때문에, 
chai, shouldjs와 같은 **assertion 라이브러리**를 통해 테스트코드를 조금 더 쉽게 구현할 수 있음.

```javascript
//assertion에는 여러가지 함수가 있는데, 
//아래 equal 메서드는 '기대값' 과 '실제값' 이 같은지를 테스트 해준다.
assert.equal(true, false);
```

Ex)  http://chaijs.com/api/assert/



----

###  Promise와 async/await 제어

비동기제어를 위해서 promise 객체사용을 찾아본다. 

async/await함수는 promise패턴을 좀더 쓰기 좋게 발전시킨 방법이다. 그 사용법도 한번 찾아보도록 한다.



------

### 참고. 테스트코드 구현 잘 짜기



#### 1. 최소단위 함수부터 테스트하기

반환값이 명확히 존재하고, 다른 함수를 호출하지 않는 함수부터 테스트 한다. 

즉,  dependency 가 없는 함수.



#### 2.  given -> when- > then 패턴

일관된 방식의 테스트 코드 구현을 위해서 

**given(테스트에 필요한 값 셋팅) -> when(실행) -> then(테스트)** 

방식으로 테스트 수행. 이 방법이 정답은 아니지만 가장 많이 쓰임. 

```javascript
describe('array test', function() {
  it('equal dummy test', function() {
	//given
	var arr = [];
	//when
	arr.push(1,2,'3');
	//then
	assert.equal(arr.length, 3);
  });
})
```

참고 :  given(테스트에 필요한 값 셋팅) -> when(실행) -> then(테스트) 
https://martinfowler.com/bliki/GivenWhenThen.html





-----


## 학습정리



### 피어 컴파일링 체크포인트

```
1. [ ] source.test.js 올바른 실행결과와 실행순서 (PASS,PASS,FAIL,FAIL,PASS,PASS)
2. [ ] source.test.js 실행결과에 'support notEqual'와 같은 설명부분이 함께 출력됨
3. [ ] source.test.js 5번째 줄에서 출력되는 비동기 테스트 결과는 2초뒤에 출력
4. [ ] fail 출력 결과 붉은색
5. [ ] 동료코드에 대한 테스트코드 구현과 올바른 결과 노출(5개이상)
6. [ ] tester.js 동작방식에 대해서 비동기 부분을 포함해 충분한 구두 설명(90초 이상 설명해야 함)
```



### 스스로 확인할 사항

- 테스트 라이브러리의 다양한 기능을 좀더 살펴보고, 내 코드와 동작방식의 차이에 대해서 비교해본다.

  

### 다같이 확인할 사항

#### 1. 라이브러리에서 제공하는 유용한 기능 제공

  인기있는 테스트프레임워크나 테스트라이브러리를 찾아본다. 

  거기에서 제공하는 유용한 기능이 있다면, 이를 흉내낼 수 있는 구현 방법을 고민해본다.

  유용한 기능은, **함수이거나 동작방식**등 다양하게 선택한다.

  

#### 2. TDD

- TDD 방식을 찾아본후, TDD의 장점과 단점은 무엇일까? 토론해본다.
-->


        <hr>

        <div class="clearfix">

          
          <a class="btn btn-primary float-left"
            href="/boost-camp/2019/07/25/%EB%B6%80%EC%8A%A4%ED%8A%B8%EC%BA%A0%ED%94%84-Day8.html" data-toggle="tooltip"
            data-placement="top" title="부스트 캠프 Day8">&larr; Previous<span class="d-none d-md-inline">
              Post</span></a>
          
          
          <a class="btn btn-primary float-right" href="/boost-camp/2019/07/30/%EB%B6%80%EC%8A%A4%ED%8A%B8%EC%BA%A0%ED%94%84-Day10.html"
            data-toggle="tooltip" data-placement="top" title="부스트 캠프 Day10">Next<span
              class="d-none d-md-inline">
              Post</span> &rarr;</a>
          

        </div>
        
        <div id="disqus_thread"></div>
          <script>

          /**
          *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
          *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
          /*
          var disqus_config = function () {
          this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
          this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
          };
          */
          (function() { // DON'T EDIT BELOW THIS LINE
          var d = document, s = d.createElement('script');
          s.src = 'https://https-changgunyee-github-io.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
          })();
          </script>
          <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      
        
        </div>
      </div>
    </div>
      
  <script id="dsq-count-scr" src="//https-changgunyee-github-io.disqus.com/count.js" async></script>
  <style>
    img{
      display:block;
      margin:0px auto;
      width:80%;
    }
    #disqus_thread{
      margin-top:2rem;
    }
  </style>


  <!-- Footer -->

<hr>

<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        <ul class="list-inline text-center">
          
          <li class="list-inline-item">
            <a href="mailto:minyoung403@naver.com">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="far fa-envelope fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          
          
          
          <li class="list-inline-item">
            <a href="https://github.com/changgunyee">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-github fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          <li class="list-inline-item">
            <a href="https://instagram.com/char_quen">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-instagram fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          <li class="list-inline-item">
              <a href="https://www.buymeacoffee.com/changgunyee" target="_blank">
                <img src="https://www.buymeacoffee.com/assets/img/custom_images/orange_img.png" alt="Buy Me A Coffee"style="height: auto !important;width: auto !important;display:inline-block;">
              </a>
          </li>
        </ul>
        <p class="copyright text-muted">Copyright &copy; 이창권 2019</p>
      </div>
    </div>
  </div>
</footer>


  <script src="/assets/vendor/jquery/jquery.min.js"></script>
<script src="/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="/assets/vendor/startbootstrap-clean-blog/js/clean-blog.min.js"></script>

<script src="/assets/scripts.js"></script>




  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-145057839-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-145057839-1');
</script>

</body>

</html>